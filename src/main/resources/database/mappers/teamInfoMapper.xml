<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lg.t2.teaminfo.TeamInfoDAO">
	
	
	<!-- 모든 팀원 리스트 조회 : 선수 전체 용 -->
	<select id="getRosterInfoSelect" resultType="TeamMemberInfoDTO">
		SELECT T.*, P.tpname,G.tgname 
		FROM twinsMemberInfo T, teamPostion P, teamGroup G 
		WHERE T.psnum = P.tpNum AND T.grNum = G.tgnum AND ( P.tpNum BETWEEN 11 AND 14)
	</select>
	
	<!--(그룹 별 조회 : 포지션 별 선수 리스트)-->
	<select id="getRosterPerPosiSelect" parameterType="int" resultType="TeamMemberInfoDTO">
		SELECT T.*, P.tpname,G.tgname 
		FROM twinsMemberInfo T, teamPostion P, teamGroup G 
		WHERE T.psnum = P.tpNum AND T.grNum = G.tgnum AND ( P.tpNum = #{psNum})
	</select>	
	<!--(그룹 별 조회 : 포지션 별 코치리스트)-->
	<!--개인별 정보 불러오기-->
	<select id= "getPerInfoSelect" parameterType="TeamMemberInfoDTO" resultType="MemberBioDTO">
		SELECT * FROM twinsMemberInfo, memberBio WHERE tNum = tbNum AND tNum = #{tNum}
	</select> 
	<!-- 팀원 정보 추가하기 : 테이블 분리가 되어있기 때문에 테이블별로 각각 2번 시행한다.  -->
	<insert id="setTeamInfoInsert" parameterType="MemberBioDTO">
		INSERT INTO twinsMemberInfo VALUES (TINFO_SEQ.nextval, #{backNum},#{tKName},#{tEName},#{useHand},#{joinyear},#{grNum},#{psNum})	
	</insert>
	
	<insert id="setBioInfoInsert" parameterType="MemberBioDTO">
		INSERT INTO memberBio VALUES (#{tbNum},#{birth},#{height},#{weight},#{edu})	
	</insert>
	
	<!--팀원 갱신하기 -->
	<update id="setTeamInfoUpdate" parameterType="TeamMemberInfoDTO">
		UPDATE twinsMemberInfo 
		SET backNum=#{backNum}, tKName = #{tKName}, tEName = #{tEName}, useHand = #{useHand}, joinyear = #{joinyear}, grNum= #{grNum},psNum = #{psNum}
		WHERE tNum = #{tNum}
	</update>
	
	<!-- 팀원 삭제하기 //팀원 삭제시 다른 것들은 자동 삭제가 된다-->
	<delete id="setTeamInfoDelete" parameterType="TeamMemberInfoDTO" >
		DELETE twinsMemberInfo 
		WHERE tNum=#{tNum}
	</delete>
	<!-- 사진 파일 추가하기  -->
</mapper>  

